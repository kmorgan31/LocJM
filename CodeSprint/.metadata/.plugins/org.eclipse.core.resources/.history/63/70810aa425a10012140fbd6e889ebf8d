package com.example.hotellocator;

import java.util.ArrayList;

import android.os.Bundle;
import android.app.SearchManager;
import android.content.Intent;
import android.support.v4.app.ListFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;

public class SearchableActivity extends ListFragment{

	Hotel[] hotels = {
    		new Hotel("Hilton", "7 Hibiscus Drive", "Lorem ipsum", 1001),
    		new Hotel("Four Seasons", "2A Shalimar Close", "Eureka", 1002),
    		new Hotel("Holiday Inn", "83 Lore Lane", "Exciting", 1003),
    		new Hotel("Grande Palladium", "3 Old Way", "Boring", 1004)
    };
	ArrayAdapter<String> listAdapter;
	ArrayList<String> hotelsFound;
	
	@Override
	public View onCreateView(LayoutInflater inflater, ViewGroup container,
	          Bundle savedInstanceState) {
	  	
	      	View rootView = inflater.inflate(R.layout.activity_search, container, false);
		
			Intent intent = new Intent();
		    if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
		      String query = intent.getStringExtra(SearchManager.QUERY);
		      hotelsFound = doMySearch(query);
		    }
		    
		    listAdapter = new ArrayAdapter<String>(getActivity(),
			        android.R.layout.simple_list_item_1, hotelsFound);
			
			setListAdapter(listAdapter);
		    
		    return rootView;
	}

	private ArrayList<String> doMySearch(String query) {
		// TODO Auto-generated method stub
		ArrayList<String> hotelNames = null;
		for(int i=0;i<hotels.length;i++)
		{
			if(hotels[i].getHotelName().equals(query))
			{
				hotelNames.add(hotels[i].getHotelName());
			}
		}
		return hotelNames;
	}

}
